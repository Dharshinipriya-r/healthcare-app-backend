<div class="search-container">
    <form [formGroup]="form" (ngSubmit)="onSearch()" class="filters">
      <label>
        Specialization
        <input formControlName="specialization" type="text" />
      </label>
      <label>
        Location
        <input formControlName="location" type="text" />
      </label>
      <!-- <label>
        Min Rating
        <input formControlName="minRating" type="number" min="0" max="5" step="0.1" />
      </label> -->
      <button type="submit" [disabled]="loading">Search</button>
    </form>
  
    <p *ngIf="infoMessage">{{ infoMessage }}</p>
  
    <div class="results" *ngIf="results.length">
      <div class="doctor-card" *ngFor="let d of results">
        <div class="header">
          <div class="name">{{ d.fullName }}</div>
          <div class="meta">{{ d.specialization }} • {{ d.location }} • ★ {{ d.rating }}</div>
        </div>
  
        <div class="availability">
          <div class="day" *ngFor="let day of (d.availability | keyvalue)">
            <div class="date">{{ day.key }}</div>
            <div class="slots">
              <button
                *ngFor="let slot of day.value"
                [ngClass]="{'slot-booked': slot.status === 'BOOKED'}"
                [disabled]="waiting"
                (click)="slot.status === 'AVAILABLE' ? bookSlot(d.id, day.key, slot.startTime) : joinWaitlist(d.id, day.key)">
                {{ slot.startTime }}–{{ slot.endTime }}
                <span *ngIf="slot.status === 'BOOKED'">(Booked - Join Waitlist)</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  